(this["webpackJsonpef-app"]=this["webpackJsonpef-app"]||[]).push([[0],{268:function(e,t,a){e.exports=a.p+"static/media/logo.4ac65da8.svg"},305:function(e,t,a){e.exports=a(539)},315:function(e,t){},317:function(e,t){},330:function(e,t){},332:function(e,t){},360:function(e,t){},361:function(e,t){},366:function(e,t){},368:function(e,t){},375:function(e,t){},394:function(e,t){},539:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),l=a.n(o),i=a(606),c=a(607),s=a(20),m=a(35),p=a.n(m),u={palette:{primary:{main:"#536DFE",light:p()("#536DFE").lighten(7.5).toHexString(),dark:p()("#536DFE").darken(15).toHexString()},secondary:{main:"#FF5C93",light:p()("#FF5C93").lighten(7.5).toHexString(),dark:p()("#FF5C93").darken(15).toHexString(),contrastText:"#FFFFFF"},warning:{main:"#FFC260",light:p()("#FFC260").lighten(7.5).toHexString(),dark:p()("#FFC260").darken(15).toHexString()},success:{main:"#3CD4A0",light:p()("#3CD4A0").lighten(7.5).toHexString(),dark:p()("#3CD4A0").darken(15).toHexString()},info:{main:"#9013FE",light:p()("#9013FE").lighten(7.5).toHexString(),dark:p()("#9013FE").darken(15).toHexString()},text:{primary:"#4A4A4A",secondary:"#6E6E6E",hint:"#B9B9B9"},background:{default:"#F6F7FF",light:"#F3F5FF"}},customShadows:{widget:"0px 3px 11px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A",widgetDark:"0px 3px 18px 0px #4558A3B3, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A",widgetWide:"0px 12px 33px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A"}},d=a(278),g={default:Object(d.a)(Object(s.a)(Object(s.a)({},u),{typography:{h1:{fontSize:"3rem"},h2:{fontSize:"2rem"},h3:{fontSize:"1.64rem"},h4:{fontSize:"1.5rem"},h5:{fontSize:"1.285rem"},h6:{fontSize:"1.142rem"}}}))},f=a(164),y=a(46),E=a(15),h=a(266),b=window.location.host.split("."),k=b[0],x=b.slice(1);x.unshift("api");var v="https://"+x.join(".")+(window.location.port?":"+window.location.port:"")+"/data/"+k+"/",C=b.slice(1);C.unshift("login");var w=C.join(".")+(window.location.port?":"+window.location.port:"")+"/auth/login?ledgerId="+k,S="daml-ui-template.daml.party",O="daml-ui-template.daml.token",j=a(31),A=r.a.createContext({isAuthenticated:!1}),F=r.a.createContext({});function B(e,t){switch(t.type){case"LOGIN_SUCCESS":return{isAuthenticated:!0,token:t.token,party:t.party};case"LOGIN_FAILURE":case"SIGN_OUT_SUCCESS":return{isAuthenticated:!1}}}var I=function(e){var t=e.children,a=localStorage.getItem(S),n=localStorage.getItem(O),o=a&&n?{isAuthenticated:!0,token:n,party:a}:{isAuthenticated:!1},l=r.a.useReducer(B,o),i=Object(j.a)(l,2),c=i[0],s=i[1];return r.a.createElement(A.Provider,{value:c},r.a.createElement(F.Provider,{value:s},t))};function N(){var e=r.a.useContext(A);if(void 0===e)throw new Error("useUserState must be used within a UserProvider");return e}function T(){var e=r.a.useContext(F);if(void 0===e)throw new Error("useUserDispatch must be used within a UserProvider");return e}function L(e,t,a,n,r,o){if(o(!1),r(!0),t){var l=a||function(e){return h.sign({"https://daml.com/ledger-api":{ledgerId:k,applicationId:"daml-ui-template",admin:!0,actAs:[e],readAs:[e]}},"secret")}(t);localStorage.setItem(S,t),localStorage.setItem(O,l),e({type:"LOGIN_SUCCESS",token:l,party:t}),o(!1),r(!1),n.push("/app")}else e({type:"LOGIN_FAILURE"}),o(!0),r(!1)}var z=function(){window.location.assign("https://".concat(w))};var D=a(582),U=a(281),R=a(89),W=a(584),H=a(608),P=a(581),G=Object(H.a)((function(e){return Object(P.a)({container:{height:"100vh",width:"100vw",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0},paperRoot:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:e.spacing(8),paddingBottom:e.spacing(8),paddingLeft:e.spacing(6),paddingRight:e.spacing(6),maxWidth:404},errorCode:{marginBottom:e.spacing(5),fontSize:84,fontWeight:600},safetyText:{marginBottom:e.spacing(5),fontWeight:300,color:e.palette.text,textAlign:"center"},backButton:{textTransform:"none",fontSize:22}})})),_=function(){var e=G();return r.a.createElement(D.a,{container:!0,className:e.container},r.a.createElement(U.a,{classes:{root:e.paperRoot}},r.a.createElement(R.a,{variant:"h3",color:"primary",className:e.errorCode},"404"),r.a.createElement(R.a,{variant:"h5",color:"primary",className:e.safetyText},"Oops. Looks like the page you're looking for no longer exists"),r.a.createElement(W.a,{variant:"contained",color:"primary",component:y.b,to:"/",size:"large",className:e.backButton},"Back to Home")))},M=a(589),V=a(611),Y=a(282),q=Object(H.a)((function(e){return Object(P.a)({container:{height:"100vh",width:"100vw",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0},logotypeContainer:{backgroundColor:e.palette.background.default,width:"60%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},logotypeImage:{width:165,marginBottom:e.spacing(4)},logotypeText:{color:"#3a478f",fontWeight:500,fontSize:64},formContainer:{width:"40%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},form:{width:320},tab:{fontWeight:400,fontSize:18},dablLoginButton:{marginBottom:e.spacing(2)},errorMessage:{textAlign:"center"},textFieldUnderline:{"&:before":{borderBottomColor:e.palette.primary.light},"&:after":{borderBottomColor:e.palette.primary.main},"&:hover:before":{borderBottomColor:"".concat(e.palette.primary.light," !important")}},textField:{borderBottomColor:e.palette.background.light},formButtons:{width:"100%",marginTop:e.spacing(4),display:"flex",justifyContent:"space-between",alignItems:"center"},loginLoader:{marginLeft:e.spacing(4)}})})),J=a(268),K=a.n(J),Q=Object(E.g)((function(e){var t=q(),a=T(),o=Object(n.useState)(!1),l=Object(j.a)(o,2),i=l[0],c=l[1],s=Object(n.useState)(!1),m=Object(j.a)(s,2),p=m[0],u=m[1],d=Object(n.useState)(""),g=Object(j.a)(d,2),f=g[0],y=g[1],E=Object(n.useState)(""),h=Object(j.a)(E,2),b=h[0],k=h[1];return r.a.createElement(D.a,{container:!0,className:t.container},r.a.createElement("div",{className:t.logotypeContainer},r.a.createElement("img",{src:K.a,alt:"logo",className:t.logotypeImage}),r.a.createElement(R.a,{className:t.logotypeText},"App Template")),r.a.createElement("div",{className:t.formContainer},r.a.createElement("div",{className:t.form},r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{in:p},r.a.createElement(R.a,{color:"secondary",className:t.errorMessage},"Something is wrong with your login or password :(")),r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{className:t.dablLoginButton,variant:"contained",color:"primary",size:"large",onClick:z},"Log in with DABL"),r.a.createElement(R.a,null,"OR")),r.a.createElement(V.a,{id:"email",InputProps:{classes:{underline:t.textFieldUnderline,input:t.textField}},value:f,onChange:function(e){return y(e.target.value)},onKeyDown:function(t){"Enter"===t.key&&L(a,f,b,e.history,c,u)},margin:"normal",placeholder:"Username",type:"email",fullWidth:!0}),r.a.createElement(V.a,{id:"password",InputProps:{classes:{underline:t.textFieldUnderline,input:t.textField}},value:b,onChange:function(e){return k(e.target.value)},onKeyDown:function(t){"Enter"===t.key&&L(a,f,b,e.history,c,u)},margin:"normal",placeholder:"Password",type:"password",fullWidth:!0}),r.a.createElement("div",{className:t.formButtons},i?r.a.createElement(M.a,{size:26,className:t.loginLoader}):r.a.createElement(W.a,{disabled:0===f.length,onClick:function(){return L(a,f,b,e.history,c,u)},variant:"contained",color:"primary",size:"large"},"Login"))))))})),X=a(62),Z=a.n(X),$=a(590),ee=a(591),te=a(592),ae=a(269),ne=a.n(ae),re=Object(H.a)((function(e){return Object(P.a)({logotype:{color:"white",marginLeft:e.spacing(2.5),marginRight:e.spacing(2.5),fontWeight:500,fontSize:18,whiteSpace:"nowrap"},appBar:{width:"100vw",zIndex:e.zIndex.drawer+1},toolbar:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},grow:{flexGrow:1},headerMenuButton:{marginLeft:e.spacing(2),padding:e.spacing(.5)},headerIcon:{fontSize:28,color:"rgba(255, 255, 255, 0.35)"}})})),oe=Object(E.g)((function(e){var t=e.history,a=re(),n=N(),o=T();return r.a.createElement($.a,{position:"fixed",className:a.appBar},r.a.createElement(ee.a,{className:a.toolbar},r.a.createElement(R.a,{variant:"h6",className:a.logotype},"DAML App Template"),r.a.createElement("div",{className:a.grow}),n.isAuthenticated&&r.a.createElement(R.a,{variant:"h6"},"User: ",n.party),r.a.createElement(te.a,{"aria-haspopup":"true",color:"inherit",className:a.headerMenuButton,"aria-controls":"profile-menu",onClick:function(e){return function(e,t){localStorage.removeItem("daml.party"),localStorage.removeItem("daml.token"),e({type:"SIGN_OUT_SUCCESS"}),t.push("/login")}(o,t)}},r.a.createElement(ne.a,{className:a.headerIcon}))))})),le=a(614),ie=a(588),ce=a(542),se=a(593),me=a(594),pe=a(270),ue=a.n(pe),de=Object(H.a)((function(e){return Object(P.a)({drawer:{width:180,flexShrink:0,whiteSpace:"nowrap"},toolbar:Object(s.a)({},e.mixins.toolbar),linkRoot:{},link:{textDecoration:"none","&:hover, &:focus":{backgroundColor:e.palette.background.light}},linkActive:{backgroundColor:e.palette.background.light},linkIcon:{marginRight:e.spacing(1),color:e.palette.text.secondary+"99",width:24,display:"flex",justifyContent:"center"},linkIconActive:{marginRight:e.spacing(1),width:24,display:"flex",justifyContent:"center",color:e.palette.primary.main},linkText:{padding:0,fontSize:16,color:e.palette.text.secondary+"CC"},linkTextActive:{padding:0,fontSize:16,color:e.palette.text.primary}})})),ge=function(e){var t=e.path,a=e.icon,n=e.label,o=e.location,l=de(),i=t&&(o.pathname===t||-1!==o.pathname.indexOf(t));return r.a.createElement(ce.a,{button:!0,component:y.b,to:t,className:l.link,classes:{root:i?l.linkActive:l.linkRoot},disableRipple:!0},r.a.createElement(se.a,{className:i?l.linkIconActive:l.linkIcon},a),r.a.createElement(me.a,{classes:{primary:i?l.linkTextActive:l.linkText},primary:n}))},fe=Object(E.g)((function(e){var t=e.location,a=de();return r.a.createElement(le.a,{open:!0,variant:"permanent",className:a.drawer,classes:{paper:a.drawer}},r.a.createElement("div",{className:a.toolbar}),r.a.createElement(ie.a,{style:{width:"100%"}},r.a.createElement(ge,{key:0,label:"Mainscreen",path:"/app/mainscreen",icon:r.a.createElement(ue.a,null),location:t})))})),ye=a(88),Ee=a.n(ye),he=a(163),be=a(600),ke=a(610),xe=a(601),ve=a(602),Ce=a(603),we=a(604),Se=a(605),Oe=a(122),je=a(85),Ae=a(596),Fe=a(597),Be=a(598),Ie=a(599),Ne=a(609),Te=a(613),Le=a(587),ze=a(595);function De(e){var t=Object(n.useState)(e.defaultValue),a=Object(j.a)(t,2),o=a[0],l=a[1];var i=Object.entries(e.fields);return r.a.createElement(Ae.a,{open:e.open,onClose:function(){return e.onClose(null)},maxWidth:"sm",fullWidth:!0},r.a.createElement(Fe.a,null,e.title),r.a.createElement(Be.a,null,i.map((function(e,t){return function(e,t){var a=Object(j.a)(e,2),n=a[0],i=a[1];return"selection"===i.type?r.a.createElement(Le.a,{key:t,fullWidth:!0},r.a.createElement(Te.a,{required:!0},i.label),r.a.createElement(Ne.a,{value:o[n],defaultValue:"",onChange:function(e){return l(Object(s.a)(Object(s.a)({},o),{},Object(je.a)({},n,e.target.value)))}},i.items.map((function(e){return r.a.createElement(ze.a,{key:e,value:e},e)})))):r.a.createElement(V.a,{required:!0,autoFocus:!0,fullWidth:!0,key:t,label:i.label,type:i.type,onChange:function(e){return l(Object(s.a)(Object(s.a)({},o),{},Object(je.a)({},n,e.target.value)))},InputLabelProps:{shrink:!0,required:!0},placeholder:"date"===i.type?"YYYY-MM-DD":""})}(e,t)}))),r.a.createElement(Ie.a,null,r.a.createElement(W.a,{onClick:function(){return e.onClose(null)},color:"primary"},"Cancel"),r.a.createElement(W.a,{onClick:function(){return e.onClose(o)},color:"primary"},"Okay")))}var Ue=Object(H.a)((function(e){return Object(P.a)({tableCell:{verticalAlign:"top",paddingTop:6,paddingBottom:6,fontSize:"0.75rem"},tableCellButton:{verticalAlign:"center",paddingTop:0,paddingBottom:0,fontSize:"0.75rem"},tableRow:{height:"auto"},textField:{fontSize:"0.75rem"},textFieldUnderline:{"&:before":{borderBottomColor:e.palette.primary.light},"&:after":{borderBottomColor:e.palette.primary.main},"&:hover:before":{borderBottomColor:"".concat(e.palette.primary.light," !important")}},choiceButton:{paddingTop:0,paddingBottom:0}})}));function Re(){var e=Object(X.useStreamQueries)(Oe.EF.WholesaleContract).contracts,t=Object(X.useStreamQueries)(Oe.EF.EFContract).contracts,a=Ue(),o=Object(X.useParty)(),l=Object(X.useLedger)(),i=((new Date).toISOString().slice(0,10),{open:!1,title:"New RetailContract",defaultValue:{originator:o,business:o,eftype:"Lease",startdate:"",duration:"",amount:"0",rate:"0.0",assetType:"Van",vin:"",businessCreditScore:"",dealercommission:""},fields:{originator:{label:"Owner",type:"text"},business:{label:"Business",type:"text"},eftype:{label:"EF Type",type:"selection",items:["Loan","Lease"]},startdate:{label:"Date of Appraisal",type:"date"},duration:{label:"Duration",type:"selection",items:["3yr","1yr"]},amount:{label:"Amount",type:"number"},rate:{label:"Rate",type:"number"},assetType:{label:"Asset Type",type:"selection",items:["Van","Tractor"]},vin:{label:"Vin",type:"text"},businessCreditScore:{label:"Business Score",type:"number"},dealercommission:{label:"Commission",type:"number"}},onClose:function(){var e=Object(he.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),c=Object(n.useState)(i),m=Object(j.a)(c,2),p=m[0],u=m[1];return r.a.createElement(be.a,null,r.a.createElement(ke.a,null,r.a.createElement(xe.a,{size:"small"},r.a.createElement(ve.a,null,r.a.createElement("div",null,r.a.createElement("p",null,"WholeSaleContracts")),r.a.createElement(Ce.a,null,r.a.createElement(we.a,{key:0}," Contract"),r.a.createElement(we.a,{key:1}," Originator"),r.a.createElement(we.a,{key:2}," Dealer"),r.a.createElement(we.a,{key:3}," Amount"),r.a.createElement(we.a,{key:4}," Rate"))),r.a.createElement(Se.a,null,e.map((function(e){return r.a.createElement(Ce.a,{key:e.contractId},r.a.createElement(we.a,{key:0},e.contractId),r.a.createElement(we.a,{key:1},e.payload.originator),r.a.createElement(we.a,{key:2},e.payload.dealer),r.a.createElement(we.a,{key:3},e.payload.loanAmount),r.a.createElement(we.a,{key:4},e.payload.interest))})))),r.a.createElement("p",null,"  ","\n"," "),r.a.createElement(De,p),r.a.createElement(W.a,{color:"primary",size:"small",className:a.choiceButton,variant:"contained",onClick:function(){return function(){function e(){return(e=Object(he.a)(Ee.a.mark((function e(t){var a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(Object(s.a)(Object(s.a)({},i),{},{open:!1})),t){e.next=3;break}return e.abrupt("return");case 3:return a=Object(s.a)({},t),e.next=6,l.create(Oe.EF.EFContract,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u(Object(s.a)(Object(s.a)({},i),{},{open:!0,onClose:function(t){return e.apply(this,arguments)}}))}()}},"Create New Asset"),r.a.createElement(xe.a,{size:"small"},r.a.createElement(ve.a,null,r.a.createElement("div",null,r.a.createElement("p",null,"RetailContracts")),r.a.createElement(Ce.a,null,r.a.createElement(we.a,{key:0}," Contract"),r.a.createElement(we.a,{key:1}," Originator"),r.a.createElement(we.a,{key:2}," Businesss"),r.a.createElement(we.a,{key:3}," EF Type"),r.a.createElement(we.a,{key:4}," Duration"),r.a.createElement(we.a,{key:5}," Amount"),r.a.createElement(we.a,{key:6}," Rate"),r.a.createElement(we.a,{key:7}," Asset Type"),r.a.createElement(we.a,{key:8}," Vin"),r.a.createElement(we.a,{key:9}," Business Score"),r.a.createElement(we.a,{key:10}," Commission"))),r.a.createElement(Se.a,null,t.map((function(e){return r.a.createElement(Ce.a,{key:e.contractId},r.a.createElement(we.a,{key:0},e.contractId),r.a.createElement(we.a,{key:1},e.payload.originator),r.a.createElement(we.a,{key:2},e.payload.business),r.a.createElement(we.a,{key:3},e.payload.eftype),r.a.createElement(we.a,{key:4},e.payload.duration),r.a.createElement(we.a,{key:5},e.payload.amount),r.a.createElement(we.a,{key:6},e.payload.rate),r.a.createElement(we.a,{key:7},e.payload.assetType),r.a.createElement(we.a,{key:8},e.payload.vin),r.a.createElement(we.a,{key:9},e.payload.businessCreditScore),r.a.createElement(we.a,{key:10},e.payload.dealercommission))}))))))}var We=Object(H.a)((function(e){return Object(P.a)({root:{display:"flex",maxWidth:"100vw",overflowX:"hidden"},content:{flexGrow:1,padding:e.spacing(3),width:"calc(100vw - ".concat(240+e.spacing(6),"px)"),minHeight:"100vh"},fakeToolbar:Object(s.a)({},e.mixins.toolbar)})})),He=Object(E.g)((function(){var e=We(),t=N();return t.isAuthenticated?r.a.createElement(Z.a,{party:t.party,token:t.token,httpBaseUrl:v,wsBaseUrl:void 0},r.a.createElement("div",{className:e.root},r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,null),r.a.createElement(fe,null),r.a.createElement("div",{className:e.content},r.a.createElement("div",{className:e.fakeToolbar}),r.a.createElement(E.d,null,r.a.createElement(E.b,{path:"/app/mainscreen",component:Re})))))):null}));function Pe(){var e=N();return r.a.createElement(y.a,null,r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/",component:function(){var e=T();return Object(n.useEffect)((function(){var t=new URL(window.location.toString()),a=t.searchParams.get("token");if(null!==a){var n=t.searchParams.get("party");if(null===n)throw Error("When 'token' is passed via URL, 'party' must be passed too.");localStorage.setItem(S,n),localStorage.setItem(O,a),e({type:"LOGIN_SUCCESS",token:a,party:n})}})),r.a.createElement(E.a,{to:"/app/mainscreen"})}}),r.a.createElement(E.b,{exact:!0,path:"/app",render:function(){return r.a.createElement(E.a,{to:"/app/mainscreen"})}}),r.a.createElement(t,{path:"/app",component:He}),r.a.createElement(a,{path:"/login",component:Q}),r.a.createElement(E.b,{component:_})));function t(t){var a=t.component,n=Object(f.a)(t,["component"]);return r.a.createElement(E.b,Object.assign({},n,{render:function(t){return e.isAuthenticated?r.a.createElement(a,t):r.a.createElement(E.a,{to:{pathname:"/login",state:{from:t.location}}})}}))}function a(t){var a=t.component,n=Object(f.a)(t,["component"]);return r.a.createElement(E.b,Object.assign({},n,{render:function(t){return e.isAuthenticated?r.a.createElement(E.a,{to:{pathname:"/"}}):r.a.createElement(a,t)}}))}}l.a.render(r.a.createElement(I,null,r.a.createElement(i.a,{theme:g.default},r.a.createElement(c.a,null),r.a.createElement(Pe,null))),document.getElementById("root"))}},[[305,1,2]]]);
//# sourceMappingURL=main.3dd27d97.chunk.js.map