{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bartc\\\\Documents\\\\Github\\\\EF\\\\ef-app\\\\ui\\\\src\\\\pages\\\\fundingrequest\\\\FundingRequest.tsx\";\nimport React, { useState } from \"react\";\nimport Table from \"@material-ui/core/Table\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport Button from \"@material-ui/core/Button\";\nimport { useStreamQueries, useLedger, useParty } from \"@daml/react\";\nimport { EF } from '@daml.js/ef-app/lib';\nimport { InputDialog } from \"./InputDialog\";\nimport useStyles from \"./styles\";\nexport default function FundingRequestList() {\n  const assets = useStreamQueries(EF.FundingContractRequest).contracts;\n  const classes = useStyles();\n  const party = useParty();\n  const ledger = useLedger();\n  const defaultApprovalProps = {\n    open: false,\n    title: \"Funding Approval\",\n    defaultValue: {\n      newFundingDate: \"\",\n      newDealerCommission: \"\",\n      selectedlessor: party\n    },\n    fields: {\n      newFundingDate: {\n        label: \"New Owner\",\n        type: \"date\"\n      },\n      newDealerCommission: {\n        label: \"Dealer Commision\",\n        type: \"number\"\n      },\n      selectedlessor: {\n        label: \"Lessor\",\n        type: \"text\"\n      }\n    },\n    onClose: async function () {}\n  };\n  const [approvalProps, setApprovalProps] = useState(defaultApprovalProps); // One can pass the original contracts CreateEvent\n\n  function showApproval(asset) {\n    async function onClose(state) {\n      setApprovalProps({ ...defaultApprovalProps,\n        open: false\n      });\n      await ledger.exercise(EF.FundingContractRequest.FundingApproval, asset.contractId, state);\n    }\n\n    ;\n    setApprovalProps({ ...defaultApprovalProps,\n      open: true,\n      onClose\n    });\n  }\n\n  ;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(InputDialog, Object.assign({}, approvalProps, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Table, {\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    className: classes.tableRow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    key: 0,\n    className: classes.tableCell,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 15\n    }\n  }, \"Lessor\"), /*#__PURE__*/React.createElement(TableCell, {\n    key: 1,\n    className: classes.tableCell,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 15\n    }\n  }, \"OriginationFee\"), /*#__PURE__*/React.createElement(TableCell, {\n    key: 2,\n    className: classes.tableCell,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 15\n    }\n  }, \"Originator\"), /*#__PURE__*/React.createElement(TableCell, {\n    key: 5,\n    className: classes.tableCell,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 15\n    }\n  }, \"Approval\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, assets.map(a => /*#__PURE__*/React.createElement(TableRow, {\n    key: a.contractId,\n    className: classes.tableRow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    key: 0,\n    className: classes.tableCell,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, a.payload.lessor), /*#__PURE__*/React.createElement(TableCell, {\n    key: 1,\n    className: classes.tableCell,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, a.payload.originationFee), /*#__PURE__*/React.createElement(TableCell, {\n    key: 2,\n    className: classes.tableCell,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, a.payload.fundingContract.originator), /*#__PURE__*/React.createElement(TableCell, {\n    key: 5,\n    className: classes.tableCellButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    size: \"small\",\n    className: classes.choiceButton,\n    variant: \"contained\",\n    disabled: a.payload.lessor !== party,\n    onClick: () => showApproval(a),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 19\n    }\n  }, \"Approval\")))))));\n}","map":{"version":3,"sources":["C:/Users/bartc/Documents/Github/EF/ef-app/ui/src/pages/fundingrequest/FundingRequest.tsx"],"names":["React","useState","Table","TableHead","TableRow","TableCell","TableBody","Button","useStreamQueries","useLedger","useParty","EF","InputDialog","useStyles","FundingRequestList","assets","FundingContractRequest","contracts","classes","party","ledger","defaultApprovalProps","open","title","defaultValue","newFundingDate","newDealerCommission","selectedlessor","fields","label","type","onClose","approvalProps","setApprovalProps","showApproval","asset","state","exercise","FundingApproval","contractId","tableRow","tableCell","map","a","payload","lessor","originationFee","fundingContract","originator","tableCellButton","choiceButton"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { useStreamQueries, useQuery, useLedger, useParty } from \"@daml/react\";\r\nimport Ledger from \"@daml/ledger\";\r\nimport { FundingApproval  } from \"@daml.js/ef-app/lib/EF\";\r\nimport { EF } from '@daml.js/ef-app/lib';\r\nimport { InputDialog, InputDialogProps } from \"./InputDialog\";\r\nimport useStyles from \"./styles\";\r\n\r\nexport default function FundingRequestList() {\r\n    const assets = useStreamQueries(EF.FundingContractRequest).contracts;\r\n    const classes = useStyles();\r\n    const party = useParty();\r\n    const ledger : Ledger = useLedger();\r\n\r\n    const defaultApprovalProps : InputDialogProps<FundingApproval> = {\r\n      open: false,\r\n      title: \"Funding Approval\",\r\n      defaultValue: { newFundingDate : \"\" ,  newDealerCommission: \"\",  selectedlessor: party },\r\n      fields: {\r\n        newFundingDate : {\r\n          label: \"New Owner\",\r\n          type: \"date\"\r\n        },\r\n        newDealerCommission : {\r\n          label: \"Dealer Commision\",\r\n          type: \"number\"\r\n        },\r\n        selectedlessor : {\r\n          label: \"Lessor\",\r\n          type: \"text\"\r\n        },\r\n      \r\n      \r\n      },\r\n      onClose: async function() {}\r\n    };\r\n\r\n  \r\n    const [ approvalProps, setApprovalProps ] = useState(defaultApprovalProps);\r\n    // One can pass the original contracts CreateEvent\r\n    function showApproval(asset : EF.FundingContractRequest.CreateEvent) {\r\n      async function onClose(state : FundingApproval | null) {\r\n        setApprovalProps({ ...defaultApprovalProps, open: false});\r\n        await ledger.exercise(EF.FundingContractRequest.FundingApproval, asset.contractId, state);\r\n      };\r\n      setApprovalProps({ ...defaultApprovalProps, open: true, onClose})\r\n    };\r\n  \r\n\r\n    return (\r\n      <>\r\n        <InputDialog { ...approvalProps } />\r\n  \r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow className={classes.tableRow}>\r\n              <TableCell key={0} className={classes.tableCell}>Lessor</TableCell>\r\n              <TableCell key={1} className={classes.tableCell}>OriginationFee</TableCell>\r\n              <TableCell key={2} className={classes.tableCell}>Originator</TableCell>\r\n              <TableCell key={5} className={classes.tableCell}>Approval</TableCell>\r\n           \r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {assets.map(a => (\r\n              <TableRow key={a.contractId} className={classes.tableRow}>\r\n                <TableCell key={0} className={classes.tableCell}>{a.payload.lessor}</TableCell>\r\n                <TableCell key={1} className={classes.tableCell}>{a.payload.originationFee}</TableCell>\r\n                <TableCell key={2} className={classes.tableCell}>{a.payload.fundingContract.originator}</TableCell>\r\n                <TableCell key={5} className={classes.tableCellButton}>\r\n                  <Button color=\"primary\" size=\"small\" className={classes.choiceButton} variant=\"contained\" disabled={a.payload.lessor !== party} onClick={() => showApproval(a)}>Approval</Button>\r\n                </TableCell>\r\n\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}