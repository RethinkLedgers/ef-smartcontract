{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bartc\\\\Documents\\\\Github\\\\EF\\\\ef-app\\\\ui\\\\src\\\\pages\\\\mainscreen\\\\MainScreen.tsx\";\n// Copyright (c) RethinkLedgers\nimport React, { useState } from 'react';\nimport { Container, Grid } from 'semantic-ui-react';\nimport { TableHead, TableBody, TableRow, TableCell, Table } from '@material-ui/core';\nimport Button from \"@material-ui/core/Button\";\nimport { EF } from '@daml.js/ef-app/lib';\nimport { useParty, useLedger, useStreamQueries } from '@daml/react';\nimport { InputDialog } from \"./InputDialog\";\nimport useStyles from \"./styles\";\nexport default function MainScreen() {\n  const assets = useStreamQueries(EF.WholesaleContract).contracts;\n  const retailcontracts = useStreamQueries(EF.EFContract).contracts;\n  const classes = useStyles();\n  const party = useParty();\n  const ledger = useLedger();\n  const today = new Date().toISOString().slice(0, 10);\n  const defaultNewAssetProps = {\n    open: false,\n    title: \"New RetailContract\",\n    defaultValue: {\n      originator: party,\n      business: party,\n      eftype: \"Lease\",\n      startdate: \"\",\n      duration: \"\",\n      amount: \"0\",\n      rate: \"0.0\",\n      assetType: \"Van\",\n      vin: \"\",\n      businessCreditScore: \"\",\n      dealercommission: \"\"\n    },\n    fields: {\n      originator: {\n        label: \"Owner\",\n        type: \"text\"\n      },\n      business: {\n        label: \"Business\",\n        type: \"text\"\n      },\n      eftype: {\n        label: \"EF Type\",\n        type: \"selection\",\n        items: [\"Loan\", \"Lease\"]\n      },\n      startdate: {\n        label: \"Date of Appraisal\",\n        type: \"date\"\n      },\n      duration: {\n        label: \"Duration\",\n        type: \"selection\",\n        items: [\"3yr\", \"1yr\"]\n      },\n      amount: {\n        label: \"Amount\",\n        type: \"number\"\n      },\n      rate: {\n        label: \"Rate\",\n        type: \"number\"\n      },\n      assetType: {\n        label: \"Asset Type\",\n        type: \"selection\",\n        items: [\"Van\", \"Tractor\"]\n      },\n      vin: {\n        label: \"Vin\",\n        type: \"text\"\n      },\n      businessCreditScore: {\n        label: \"Business Score\",\n        type: \"number\"\n      },\n      dealercommission: {\n        label: \"Commission\",\n        type: \"number\"\n      }\n    },\n    onClose: async function () {}\n  };\n  const [newAssetProps, setNewAssetProps] = useState(defaultNewAssetProps);\n\n  function showNewAsset() {\n    async function onClose(state) {\n      setNewAssetProps({ ...defaultNewAssetProps,\n        open: false\n      });\n      if (!state) return;\n      const withData = { ...state\n      };\n      await ledger.create(EF.EFContract, withData);\n    }\n\n    ;\n    setNewAssetProps({ ...defaultNewAssetProps,\n      open: true,\n      onClose\n    });\n  }\n\n  ;\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  }, \"WholeSaleContracts\")), /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    key: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 16\n    }\n  }, \" Contract\"), /*#__PURE__*/React.createElement(TableCell, {\n    key: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 16\n    }\n  }, \" Originator\"), /*#__PURE__*/React.createElement(TableCell, {\n    key: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 16\n    }\n  }, \" Dealer\"), /*#__PURE__*/React.createElement(TableCell, {\n    key: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 16\n    }\n  }, \" Amount\"), /*#__PURE__*/React.createElement(TableCell, {\n    key: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 16\n    }\n  }, \" Rate\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, assets.map(a => /*#__PURE__*/React.createElement(TableRow, {\n    key: a.contractId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    key: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 16\n    }\n  }, a.contractId), /*#__PURE__*/React.createElement(TableCell, {\n    key: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 16\n    }\n  }, a.payload.originator), /*#__PURE__*/React.createElement(TableCell, {\n    key: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 16\n    }\n  }, a.payload.dealer), /*#__PURE__*/React.createElement(TableCell, {\n    key: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 16\n    }\n  }, a.payload.loanAmount), /*#__PURE__*/React.createElement(TableCell, {\n    key: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 16\n    }\n  }, a.payload.interest))))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, \"\\n\", \" \"), /*#__PURE__*/React.createElement(InputDialog, Object.assign({}, newAssetProps, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    size: \"small\",\n    className: classes.choiceButton,\n    variant: \"contained\",\n    onClick: () => showNewAsset(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, \"Create New Asset\"), /*#__PURE__*/React.createElement(Table, {\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 15\n    }\n  }, \"RetailContracts\")), /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    key: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 16\n    }\n  }, \" Contract\"), /*#__PURE__*/React.createElement(TableCell, {\n    key: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 16\n    }\n  }, \" Originator\"), /*#__PURE__*/React.createElement(TableCell, {\n    key: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 16\n    }\n  }, \" Businesss\"), /*#__PURE__*/React.createElement(TableCell, {\n    key: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 16\n    }\n  }, \" EF Type\"), /*#__PURE__*/React.createElement(TableCell, {\n    key: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 16\n    }\n  }, \" Duration\"), /*#__PURE__*/React.createElement(TableCell, {\n    key: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 16\n    }\n  }, \" Amount\"), /*#__PURE__*/React.createElement(TableCell, {\n    key: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 16\n    }\n  }, \" Rate\"), /*#__PURE__*/React.createElement(TableCell, {\n    key: 7,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 16\n    }\n  }, \" Asset Type\"), /*#__PURE__*/React.createElement(TableCell, {\n    key: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 16\n    }\n  }, \" Vin\"), /*#__PURE__*/React.createElement(TableCell, {\n    key: 9,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 16\n    }\n  }, \" Business Score\"), /*#__PURE__*/React.createElement(TableCell, {\n    key: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 16\n    }\n  }, \" Commission\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }\n  }, retailcontracts.map(r => /*#__PURE__*/React.createElement(TableRow, {\n    key: r.contractId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    key: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 16\n    }\n  }, r.contractId), /*#__PURE__*/React.createElement(TableCell, {\n    key: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 16\n    }\n  }, r.payload.originator), /*#__PURE__*/React.createElement(TableCell, {\n    key: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 16\n    }\n  }, r.payload.business), /*#__PURE__*/React.createElement(TableCell, {\n    key: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 16\n    }\n  }, r.payload.eftype), /*#__PURE__*/React.createElement(TableCell, {\n    key: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 16\n    }\n  }, r.payload.duration), /*#__PURE__*/React.createElement(TableCell, {\n    key: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 16\n    }\n  }, r.payload.amount), /*#__PURE__*/React.createElement(TableCell, {\n    key: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 16\n    }\n  }, r.payload.rate), /*#__PURE__*/React.createElement(TableCell, {\n    key: 7,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 16\n    }\n  }, r.payload.assetType), /*#__PURE__*/React.createElement(TableCell, {\n    key: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 16\n    }\n  }, r.payload.vin), /*#__PURE__*/React.createElement(TableCell, {\n    key: 9,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 16\n    }\n  }, r.payload.businessCreditScore), /*#__PURE__*/React.createElement(TableCell, {\n    key: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 16\n    }\n  }, r.payload.dealercommission)))))));\n}","map":{"version":3,"sources":["C:/Users/bartc/Documents/Github/EF/ef-app/ui/src/pages/mainscreen/MainScreen.tsx"],"names":["React","useState","Container","Grid","TableHead","TableBody","TableRow","TableCell","Table","Button","EF","useParty","useLedger","useStreamQueries","InputDialog","useStyles","MainScreen","assets","WholesaleContract","contracts","retailcontracts","EFContract","classes","party","ledger","today","Date","toISOString","slice","defaultNewAssetProps","open","title","defaultValue","originator","business","eftype","startdate","duration","amount","rate","assetType","vin","businessCreditScore","dealercommission","fields","label","type","items","onClose","newAssetProps","setNewAssetProps","showNewAsset","state","withData","create","map","a","contractId","payload","dealer","loanAmount","interest","choiceButton","r"],"mappings":"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","sourcesContent":["// Copyright (c) RethinkLedgers\r\n\r\nimport React, { useState }  from 'react';\r\nimport { Container, Grid,  } from 'semantic-ui-react' ;\r\nimport { TableHead,TableBody, TableRow, TableCell, Table } from '@material-ui/core' ;\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { EF } from '@daml.js/ef-app/lib';\r\nimport { useParty, useLedger,  useStreamQueries } from '@daml/react';\r\nimport Ledger from \"@daml/ledger\";\r\nimport { EFContract  } from \"@daml.js/ef-app/lib/EF\";\r\nimport { InputDialog, InputDialogProps } from \"./InputDialog\";\r\nimport useStyles from \"./styles\";\r\n\r\n\r\n\r\nexport default function MainScreen() {\r\n\r\n  const assets = useStreamQueries(EF.WholesaleContract).contracts;\r\n  const retailcontracts = useStreamQueries(EF.EFContract).contracts;\r\n  const classes = useStyles();\r\n  const party = useParty();\r\n  const ledger: Ledger = useLedger();\r\n  const today = (new Date()).toISOString().slice(0, 10);\r\n\r\n\r\n  type InputFieldsForNewAsset = Omit<EFContract, \"EFContract\">;\r\n  const defaultNewAssetProps: InputDialogProps<InputFieldsForNewAsset> = {\r\n      open: false,\r\n      title: \"New RetailContract\",\r\n      defaultValue: {\r\n        originator : party,\r\n        business : party,\r\n        eftype: \"Lease\",\r\n        startdate : \"\",\r\n        duration : \"\",\r\n        amount : \"0\",\r\n        rate : \"0.0\",\r\n        assetType : \"Van\",\r\n        vin : \"\",\r\n        businessCreditScore: \"\",\r\n        dealercommission: \"\",\r\n      },\r\n      fields: {\r\n          originator: {\r\n              label: \"Owner\",\r\n              type: \"text\",\r\n          },\r\n          business: {\r\n              label: \"Business\",\r\n              type: \"text\"\r\n          },\r\n          eftype: {\r\n            label: \"EF Type\",\r\n            type: \"selection\",\r\n            items: [\"Loan\", \"Lease\"]\r\n          },\r\n          startdate: {\r\n              label: \"Date of Appraisal\",\r\n              type: \"date\"\r\n          },\r\n          duration: {\r\n            label: \"Duration\",\r\n            type: \"selection\",\r\n            items: [\"3yr\", \"1yr\"]\r\n          },\r\n          amount: {\r\n            label: \"Amount\",\r\n            type: \"number\"\r\n          },\r\n          rate: {\r\n            label: \"Rate\",\r\n            type: \"number\" \r\n          },\r\n          assetType: {\r\n            label: \"Asset Type\",\r\n            type: \"selection\",\r\n            items: [\"Van\", \"Tractor\"]\r\n          },\r\n          vin: {\r\n            label: \"Vin\",\r\n            type: \"text\"\r\n          },\r\n          businessCreditScore: {\r\n            label: \"Business Score\",\r\n            type: \"number\"\r\n          },\r\n          dealercommission: {\r\n            label: \"Commission\",\r\n            type: \"number\"\r\n          }\r\n      },\r\n      onClose: async function () { }\r\n  };\r\n  const [newAssetProps, setNewAssetProps] = useState(defaultNewAssetProps);\r\n  function showNewAsset() {\r\n      async function onClose(state: InputFieldsForNewAsset | null) {\r\n          setNewAssetProps({ ...defaultNewAssetProps, open: false });\r\n          if (!state) return;\r\n          const withData = { ...state };\r\n          await ledger.create(EF.EFContract, withData);\r\n      };\r\n      setNewAssetProps({ ...defaultNewAssetProps, open: true, onClose });\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <Grid >\r\n     \r\n        <Table size =\"small\">\r\n          <TableHead>\r\n            <div> \r\n              <p>WholeSaleContracts</p>\r\n            </div>\r\n            <TableRow>\r\n               <TableCell key ={0}> Contract</TableCell>\r\n               <TableCell key ={1}> Originator</TableCell>\r\n               <TableCell key ={2}> Dealer</TableCell>\r\n               <TableCell key ={3}> Amount</TableCell>\r\n               <TableCell key ={4}> Rate</TableCell>\r\n            </TableRow>\r\n\r\n          </TableHead>\r\n          <TableBody>\r\n           {assets.map(a => (\r\n            <TableRow key ={a.contractId}>\r\n               <TableCell key={0} >{a.contractId}</TableCell>\r\n               <TableCell key={1} >{a.payload.originator}</TableCell>\r\n               <TableCell key={2} >{a.payload.dealer}</TableCell>\r\n               <TableCell key={3} >{a.payload.loanAmount}</TableCell>\r\n               <TableCell key={4} >{a.payload.interest}</TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n        </Table>\r\n        <div>{\"\\n\"} </div>\r\n        \r\n            <InputDialog {...newAssetProps} />\r\n            <Button color=\"primary\" size=\"small\" className={classes.choiceButton} variant=\"contained\" onClick={() => showNewAsset()}>\r\n                Create New Asset\r\n       </Button>\r\n\r\n        <Table size =\"small\">\r\n          <TableHead>\r\n            <div> \r\n              <p>RetailContracts</p>\r\n            </div>\r\n            <TableRow>\r\n               <TableCell key ={0}> Contract</TableCell>\r\n               <TableCell key ={1}> Originator</TableCell>\r\n               <TableCell key ={2}> Businesss</TableCell>\r\n               <TableCell key ={3}> EF Type</TableCell>\r\n               <TableCell key ={4}> Duration</TableCell>\r\n               <TableCell key ={5}> Amount</TableCell>\r\n               <TableCell key ={6}> Rate</TableCell>\r\n               <TableCell key ={7}> Asset Type</TableCell>\r\n               <TableCell key ={8}> Vin</TableCell>\r\n               <TableCell key ={9}> Business Score</TableCell>\r\n               <TableCell key ={10}> Commission</TableCell>\r\n            </TableRow>\r\n\r\n          </TableHead>\r\n          <TableBody>\r\n           {retailcontracts.map(r => (\r\n            <TableRow key ={r.contractId}>\r\n               <TableCell key={0} >{r.contractId}</TableCell>\r\n               <TableCell key={1} >{r.payload.originator}</TableCell>\r\n               <TableCell key={2} >{r.payload.business}</TableCell>\r\n               <TableCell key={3} >{r.payload.eftype}</TableCell>\r\n               <TableCell key={4} >{r.payload.duration}</TableCell>\r\n               <TableCell key={5} >{r.payload.amount}</TableCell>\r\n               <TableCell key={6} >{r.payload.rate}</TableCell>\r\n               <TableCell key={7} >{r.payload.assetType}</TableCell>\r\n               <TableCell key={8} >{r.payload.vin}</TableCell>\r\n               <TableCell key={9} >{r.payload.businessCreditScore}</TableCell>\r\n               <TableCell key={10} >{r.payload.dealercommission}</TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n        </Table>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}